<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="A beautiful, interactive checklist app that works offline. Organize your tasks with style.">
    <meta name="theme-color" content="#0f172a">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- SEO -->
    <title>A380 Operations - Your Interactive Checklist</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="icon-192.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">‚úì</div>
                    <h1 class="app-title">A380 Operations</h1>
                </div>
                <div class="stats-section">
                    <a href="flight-prep.html" class="flight-prep-link" aria-label="Flight Preparation">
                        <span class="prep-icon">‚úàÔ∏è</span>
                        <span class="prep-label">Flight Prep</span>
                    </a>
                    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                        <span class="theme-icon">üåô</span>
                    </button>
                    <div class="stat-item">
                        <span class="stat-value" id="total-count">0</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="completed-count">0</span>
                        <span class="stat-label">Done</span>
                    </div>
                </div>
            </div>
            <!-- Time Section -->
            <div class="time-section">
                <div class="clock-row">
                    <div class="utc-clock">
                        <span class="clock-label">UTC</span>
                        <span class="clock-time" id="utc-clock">--:--:--</span>
                    </div>
                    <div class="local-clock">
                        <span class="clock-label">LT</span>
                        <span class="clock-time" id="local-clock">--:--:--</span>
                    </div>
                </div>
                <div class="departure-time-input">
                    <label for="departure-time" class="departure-label">STD:</label>
                    <input type="time" id="departure-time" class="departure-input" placeholder="--:--">
                </div>
            </div>
        </header>

        <!-- Timeline Section -->
        <div id="timeline-section" class="timeline-section hidden">
            <div class="timeline-header">
                <h3 class="timeline-title">Flight Timeline</h3>
                <button id="timeline-toggle" class="timeline-toggle" onclick="toggleTimelineDisplay()">
                    <span id="timeline-toggle-text">UTC</span>
                </button>
            </div>
            <div class="timeline-container">
                <div class="timeline-progress" id="timeline-progress"></div>
                <div class="timeline-milestones">
                    <div class="timeline-milestone" data-offset="-85">
                        <div class="milestone-marker"></div>
                        <div class="milestone-label">
                            <span class="milestone-time">-1:25</span>
                            <span class="milestone-name">Report Time</span>
                        </div>
                    </div>
                    <div class="timeline-milestone" data-offset="-83">
                        <div class="milestone-marker"></div>
                        <div class="milestone-label">
                            <span class="milestone-time">-1:23</span>
                            <span class="milestone-name">Briefing</span>
                        </div>
                    </div>
                    <div class="timeline-milestone" data-offset="-70">
                        <div class="milestone-marker"></div>
                        <div class="milestone-label">
                            <span class="milestone-time">-1:10</span>
                            <span class="milestone-name">In The Bus</span>
                        </div>
                    </div>
                    <div class="timeline-milestone" data-offset="-60">
                        <div class="milestone-marker"></div>
                        <div class="milestone-label">
                            <span class="milestone-time">-1:00</span>
                            <span class="milestone-name">At Aircraft</span>
                        </div>
                    </div>
                    <div class="timeline-milestone" data-offset="-40">
                        <div class="milestone-marker"></div>
                        <div class="milestone-label">
                            <span class="milestone-time">-0:40</span>
                            <span class="milestone-name">Prelim Load/Pax Boarding</span>
                        </div>
                    </div>
                    <div class="timeline-milestone" data-offset="-20">
                        <div class="milestone-marker"></div>
                        <div class="milestone-label">
                            <span class="milestone-time">-0:20</span>
                            <span class="milestone-name">APU Start</span>
                        </div>
                    </div>
                    <div class="timeline-milestone" data-offset="-15">
                        <div class="milestone-marker"></div>
                        <div class="milestone-label">
                            <span class="milestone-time">-0:15</span>
                            <span class="milestone-name">Final Load</span>
                        </div>
                    </div>
                    <div class="timeline-milestone" data-offset="-10">
                        <div class="milestone-marker"></div>
                        <div class="milestone-label">
                            <span class="milestone-time">-0:10</span>
                            <span class="milestone-name">GPU/ACU Off</span>
                        </div>
                    </div>
                    <div class="timeline-milestone" data-offset="0">
                        <div class="milestone-marker departure"></div>
                        <div class="milestone-label">
                            <span class="milestone-time">STD</span>
                            <span class="milestone-name">Departure</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Input Section -->
            <div class="input-section">
                <div class="input-wrapper">
                    <input type="text" id="task-input" class="task-input" placeholder="What needs to be done?"
                        autocomplete="off">
                    <button id="add-btn" class="add-btn" aria-label="Add task">
                        <span class="add-icon">+</span>
                    </button>
                </div>
            </div>

            <!-- Utility Section -->
            <div class="filter-section">
                <button class="filter-btn" onclick="openNotepad('nonstandard')">
                    üìù Non Standard
                </button>
                <button class="filter-btn" onclick="openNotepad('clearances')">
                    üìã Clearances
                </button>
                <button class="filter-btn" onclick="openCalculator()">
                    üßÆ Calculator
                </button>
            </div>

            <!-- Checklist Title -->
            <div class="checklist-title-section">
                <h2 class="checklist-title" id="checklist-title">‚úàÔ∏è Preflight Checklist</h2>
                <button id="decision-making-btn" class="decision-making-btn" onclick="openDecisionMakingChecklist()"
                    aria-label="Decision Making Checklist">
                    ‚ö° DM
                </button>
                <button id="departure-change-btn" class="decision-making-btn" onclick="openDepartureChangeChecklist()"
                    aria-label="Departure Change Checklist">
                    üîÑ Dep Change
                </button>
                <button id="next-checklist-btn" class="next-checklist-btn" aria-label="Next checklist">
                    Next ‚Üí
                </button>
            </div>

            <!-- Checklist Container -->
            <div class="checklist-container" id="checklist-container">
                <!-- Empty state -->
                <div class="empty-state" id="empty-state">
                    <div class="empty-icon">üìù</div>
                    <h2 class="empty-title">No tasks yet</h2>
                    <p class="empty-text">Add your first task to get started!</p>
                </div>

                <!-- Tasks will be dynamically added here -->
                <ul class="task-list" id="task-list"></ul>
            </div>
        </main>

        <!-- Info Modal -->
        <div id="info-modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <button class="modal-close" id="modal-close" aria-label="Close">√ó</button>
                <h3 class="modal-title" id="modal-title"></h3>
                <div class="modal-body" id="modal-body"></div>
            </div>
        </div>

        <!-- Decision Making Checklist Modal -->
        <div id="decision-making-modal" class="modal hidden">
            <div class="modal-overlay" onclick="closeDecisionMakingChecklist()"></div>
            <div class="modal-content dm-modal-content">
                <button class="modal-close" onclick="closeDecisionMakingChecklist()" aria-label="Close">&times;</button>
                <h3 class="modal-title">&#9889; Decision Making Checklist</h3>
                <div class="dm-checklist">

                    <!-- 1 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-1" onchange="saveDMChecklistState()">
                            <label for="dm-check-1">
                                <span class="dm-number">1</span>
                                <span class="dm-text">Aviate &middot; Navigate &middot; Communicate</span>
                            </label>
                            <button class="dm-expand-btn" onclick="toggleDMPanel(1)" id="dm-btn-1" aria-label="Expand">&#9660;</button>
                        </div>
                        <div class="dm-panel" id="dm-panel-1">
                            <div class="dm-action-group">
                                <div class="dm-group-title">&#9992;&#65039; Aviate / Navigate</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">FMA</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">SPEED</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">AC LIMITATIONS</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">FLIGHT LAW</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">AP / EOSID</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">TERRAIN</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">WXR</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Where do I need to go?</span></div>
                                </div>
                            </div>
                            <div class="dm-action-group">
                                <div class="dm-group-title">&#128225; Communicate</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">FC</span><span class="dm-action-detail">&nbsp;&mdash; Flight Crew</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">ATC</span><span class="dm-action-detail">&nbsp;&mdash; MAYDAY / PAN</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">PURSER</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">PAX</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">COMPANY</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-2" onchange="saveDMChecklistState()">
                            <label for="dm-check-2"><span class="dm-number">2</span><span class="dm-text">Confirm Failure</span></label>
                        </div>
                    </div>

                    <!-- 3 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-3" onchange="saveDMChecklistState()">
                            <label for="dm-check-3"><span class="dm-number">3</span><span class="dm-text">OEB</span></label>
                        </div>
                    </div>

                    <!-- 4 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-4" onchange="saveDMChecklistState()">
                            <label for="dm-check-4"><span class="dm-number">4</span><span class="dm-text">ECAM Actions</span></label>
                        </div>
                    </div>

                    <!-- 5 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-5" onchange="saveDMChecklistState()">
                            <label for="dm-check-5"><span class="dm-number">5</span><span class="dm-text">Status? Stop ECAM</span></label>
                        </div>
                    </div>

                    <!-- 6 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-6" onchange="saveDMChecklistState()">
                            <label for="dm-check-6"><span class="dm-number">6</span><span class="dm-text">Checklist &middot; Reset &middot; Deferred Procedure (Relight &middot; Overweight)</span></label>
                        </div>
                    </div>

                    <!-- 7 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-7" onchange="saveDMChecklistState()">
                            <label for="dm-check-7"><span class="dm-number">7</span><span class="dm-text">Read Status</span></label>
                        </div>
                    </div>

                    <!-- 8 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-8" onchange="saveDMChecklistState()">
                            <label for="dm-check-8"><span class="dm-number">8</span><span class="dm-text">ECAM Actions Complete</span></label>
                        </div>
                    </div>


                    <!-- 9 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-9" onchange="saveDMChecklistState()">
                            <label for="dm-check-9">
                                <span class="dm-number">9</span>
                                <span class="dm-text">Information Gathering</span>
                            </label>
                            <button class="dm-expand-btn" onclick="toggleDMPanel(9)" id="dm-btn-9" aria-label="Expand">&#9660;</button>
                        </div>
                        <div class="dm-panel" id="dm-panel-9">
                            <div class="dm-action-group">
                                <div class="dm-group-title">&#128221; Sources</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">FCOM</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">MEL</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">CC</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">MCC</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">DISPATCH</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">ATC</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">TPOD</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">MPOD</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 10 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-10" onchange="saveDMChecklistState()">
                            <label for="dm-check-10">
                                <span class="dm-number">10</span>
                                <span class="dm-text">Can we? Continue &middot; Divert &middot; Return?</span>
                            </label>
                            <button class="dm-expand-btn" onclick="toggleDMPanel(10)" id="dm-btn-10" aria-label="Expand">&#9660;</button>
                        </div>
                        <div class="dm-panel" id="dm-panel-10">

                            <div class="dm-action-group">
                                <div class="dm-group-title">&#128640; Make it</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">FUEL</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">WXR</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">TER</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">RNP</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">RVSM</span></div>
                                </div>
                            </div>

                            <div class="dm-action-group">
                                <div class="dm-group-title">&#128752; Approach</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Approach Type</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Minima</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Cloud Ceiling</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Visibility</span></div>
                                </div>
                            </div>

                            <div class="dm-action-group">
                                <div class="dm-group-title">&#128806; Land &amp; Stop</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">LDPA</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">RWYCC</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Wind Limits</span></div>
                                </div>
                            </div>

                            <div class="dm-action-group">
                                <div class="dm-group-title">&#9650; Go Around &amp; Plan B</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">GA Gradient</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Another RWY or Airport</span></div>
                                </div>
                            </div>

                            <div class="dm-action-group">
                                <div class="dm-group-title">&#128663; Taxi</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Limitations</span></div>
                                </div>
                            </div>

                            <div class="dm-action-group">
                                <div class="dm-group-title">&#128295; Turn Around</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">MEL</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Fuel</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Engineering</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Service</span></div>
                                </div>
                            </div>

                        </div>
                    </div>


                    <!-- 11 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-11" onchange="saveDMChecklistState()">
                            <label for="dm-check-11">
                                <span class="dm-number">11</span>
                                <span class="dm-text">Advise Shareholders</span>
                            </label>
                            <button class="dm-expand-btn" onclick="toggleDMPanel(11)" id="dm-btn-11" aria-label="Expand">&#9660;</button>
                        </div>
                        <div class="dm-panel" id="dm-panel-11">
                            <div class="dm-action-group">
                                <div class="dm-group-title">&#128226; Notify</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">VPNC</span><span class="dm-action-detail">&nbsp;&mdash; Diversion report if required</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">ATC</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">PURSER</span><span class="dm-action-detail">&nbsp;&mdash; NITS</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">PAX</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 12 -->
                    <div class="dm-item">
                        <div class="dm-item-header">
                            <input type="checkbox" class="dm-checkbox" id="dm-check-12" onchange="saveDMChecklistState()">
                            <label for="dm-check-12">
                                <span class="dm-number">12</span>
                                <span class="dm-text">Finish Setup &amp; Brief Difference</span>
                            </label>
                            <button class="dm-expand-btn" onclick="toggleDMPanel(12)" id="dm-btn-12" aria-label="Expand">&#9660;</button>
                        </div>
                        <div class="dm-panel" id="dm-panel-12">
                            <div class="dm-action-group">
                                <div class="dm-group-title">&#128203; Brief Phases</div>
                                <div class="dm-actions">
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Descent</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Approach</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Landing</span></div>
                                    <div class="dm-action-step"><span class="dm-action-arrow">&#9658;</span><span class="dm-action-label">Taxi</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>

                </div>
                <button class="dm-reset-btn" onclick="resetDMChecklist()">&#8635; Reset Decision Making</button>
            </div>
        </div>

        <!-- Departure Change Checklist Modal -->
        <div id="departure-change-modal" class="modal hidden">
            <div class="modal-overlay" onclick="closeDepartureChangeChecklist()"></div>
            <div class="modal-content dm-modal-content">
                <button class="modal-close" onclick="closeDepartureChangeChecklist()" aria-label="Close">√ó</button>
                <h3 class="modal-title">üîÑ Departure Change Checklist</h3>
                <div class="dm-checklist">
                    <div class="dm-item">
                        <input type="checkbox" class="dm-checkbox" id="dc-check-1" onchange="saveDCChecklistState()">
                        <label for="dc-check-1">
                            <span class="dm-number">1</span>
                            <span class="dm-text">TOPA</span>
                        </label>
                    </div>
                    <div class="dm-item">
                        <input type="checkbox" class="dm-checkbox" id="dc-check-2" onchange="saveDCChecklistState()">
                        <label for="dc-check-2">
                            <span class="dm-number">2</span>
                            <span class="dm-text">PERF</span>
                        </label>
                    </div>
                    <div class="dm-item">
                        <input type="checkbox" class="dm-checkbox" id="dc-check-3" onchange="saveDCChecklistState()">
                        <label for="dc-check-3">
                            <span class="dm-number">3</span>
                            <span class="dm-text">FPLN</span>
                        </label>
                    </div>
                    <div class="dm-item">
                        <input type="checkbox" class="dm-checkbox" id="dc-check-4" onchange="saveDCChecklistState()">
                        <label for="dc-check-4">
                            <span class="dm-number">4</span>
                            <span class="dm-text">FIX Info</span>
                        </label>
                    </div>
                    <div class="dm-item">
                        <input type="checkbox" class="dm-checkbox" id="dc-check-5" onchange="saveDCChecklistState()">
                        <label for="dc-check-5">
                            <span class="dm-number">5</span>
                            <span class="dm-text">ISIS Fix</span>
                        </label>
                    </div>
                    <div class="dm-item">
                        <input type="checkbox" class="dm-checkbox" id="dc-check-6" onchange="saveDCChecklistState()">
                        <label for="dc-check-6">
                            <span class="dm-number">6</span>
                            <span class="dm-text">Sec FPLN</span>
                        </label>
                    </div>
                </div>
                <button class="dm-reset-btn" onclick="resetDCChecklist()">‚Ü∫ Reset Departure Change</button>
            </div>
        </div>

        <!-- Notepad Modal -->
        <div id="notepad-modal" class="modal hidden">
            <div class="modal-overlay" onclick="closeNotepad()"></div>
            <div class="modal-content notepad-modal-content">
                <button class="modal-close" onclick="closeNotepad()" aria-label="Close">√ó</button>
                <h3 class="modal-title" id="notepad-title">üìù Notepad</h3>
                <textarea id="notepad-textarea" class="notepad-textarea"
                    placeholder="Type your notes here..."></textarea>
                <button class="save-notepad-btn" onclick="saveNotepad()">üíæ Save Notes</button>
            </div>
        </div>

        <!-- Calculator Modal -->
        <div id="calculator-modal" class="modal hidden">
            <div class="modal-overlay" onclick="closeCalculator()"></div>
            <div class="modal-content calculator-modal-content">
                <button class="modal-close" onclick="closeCalculator()" aria-label="Close">√ó</button>
                <h3 class="modal-title">üßÆ Calculator</h3>
                <div class="calculator">
                    <input type="text" id="calc-display" class="calc-display" readonly>
                    <div class="calc-buttons">
                        <button class="calc-btn calc-clear" onclick="clearCalculator()">C</button>
                        <button class="calc-btn calc-operator" onclick="appendToCalc('/')">/</button>
                        <button class="calc-btn calc-operator" onclick="appendToCalc('*')">√ó</button>
                        <button class="calc-btn calc-operator" onclick="deleteLastCalc()">‚å´</button>

                        <button class="calc-btn" onclick="appendToCalc('7')">7</button>
                        <button class="calc-btn" onclick="appendToCalc('8')">8</button>
                        <button class="calc-btn" onclick="appendToCalc('9')">9</button>
                        <button class="calc-btn calc-operator" onclick="appendToCalc('-')">-</button>

                        <button class="calc-btn" onclick="appendToCalc('4')">4</button>
                        <button class="calc-btn" onclick="appendToCalc('5')">5</button>
                        <button class="calc-btn" onclick="appendToCalc('6')">6</button>
                        <button class="calc-btn calc-operator" onclick="appendToCalc('+')">+</button>

                        <button class="calc-btn" onclick="appendToCalc('1')">1</button>
                        <button class="calc-btn" onclick="appendToCalc('2')">2</button>
                        <button class="calc-btn" onclick="appendToCalc('3')">3</button>
                        <button class="calc-btn calc-equals" onclick="calculateResult()"
                            style="grid-row: span 2;">=</button>

                        <button class="calc-btn" onclick="appendToCalc('0')" style="grid-column: span 2;">0</button>
                        <button class="calc-btn" onclick="appendToCalc('.')">.</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Toolkit -->
        <footer class="footer">
            <div class="toolkit-bar">
                <button class="toolkit-btn" onclick="openToolkit('converter')" aria-label="Unit Converter">
                    <span class="toolkit-icon">üßÆ</span>
                    <span class="toolkit-label">Converter</span>
                </button>
                <button class="toolkit-btn" onclick="openToolkit('wind')" aria-label="Wind Calculator">
                    <span class="toolkit-icon">üå¨Ô∏è</span>
                    <span class="toolkit-label">Wind Calc</span>
                </button>
                <button class="toolkit-btn" onclick="openToolkit('rate1')" aria-label="Rate 1 Turn">
                    <span class="toolkit-icon">üîÑ</span>
                    <span class="toolkit-label">Rate 1</span>
                </button>
                <button class="toolkit-btn" onclick="openToolkit('isa')" aria-label="ISA Deviation">
                    <span class="toolkit-icon">üå°Ô∏è</span>
                    <span class="toolkit-label">ISA Dev</span>
                </button>
                <button class="toolkit-btn" onclick="openToolkit('densalt')" aria-label="Density Altitude">
                    <span class="toolkit-icon">üå°Ô∏èüå°Ô∏è</span>
                    <span class="toolkit-label">Dens Alt</span>
                </button>
                <button class="toolkit-btn" onclick="openToolkit('fdp')" aria-label="Flight Duty Period Calculator">
                    <span class="toolkit-icon">‚è±Ô∏è</span>
                    <span class="toolkit-label">FDP Calc</span>
                </button>
                <button class="toolkit-btn" onclick="openToolkit('splitrest')" aria-label="Split Rest Calculator">
                    <span class="toolkit-icon">üò¥</span>
                    <span class="toolkit-label">Split Rest</span>
                </button>
                <a href="mindmap.html" class="toolkit-btn mindmap-btn" aria-label="Workflow Mind Map">
                    <span class="toolkit-icon">üó∫Ô∏è</span>
                    <span class="toolkit-label">Workflow</span>
                </a>
                <button class="toolkit-btn reset-btn" onclick="resetChecklist()" aria-label="Reset Checklist">
                    <span class="toolkit-icon">‚Ü∫</span>
                    <span class="toolkit-label">Reset</span>
                </button>
            </div>
            <p class="footer-text">
                <span class="offline-indicator">‚óè</span>
                Works offline ‚Ä¢ Data saved locally
            </p>
        </footer>
    </div>

    <!-- Toolkit Modals -->
    <div id="toolkit-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content toolkit-content">
            <button class="modal-close" onclick="closeToolkit()" aria-label="Close">√ó</button>

            <!-- Unit Converter -->
            <div id="converter-toolkit" class="toolkit-panel hidden">
                <h3 class="toolkit-title">Unit Converter</h3>
                <div class="converter-tabs">
                    <button class="converter-tab active" onclick="switchConverterTab('fuel')">Fuel</button>
                    <button class="converter-tab" onclick="switchConverterTab('distance')">Distance</button>
                    <button class="converter-tab" onclick="switchConverterTab('temp')">Temp</button>
                </div>

                <!-- Fuel Converter -->
                <div id="fuel-converter" class="converter-section">
                    <div class="converter-row">
                        <input type="number" id="fuel-kg" class="converter-input" placeholder="0">
                        <span class="converter-unit">kg</span>
                    </div>
                    <div class="converter-row">
                        <input type="number" id="fuel-lbs" class="converter-input" placeholder="0">
                        <span class="converter-unit">lbs</span>
                    </div>
                    <div class="converter-row">
                        <input type="number" id="fuel-tons" class="converter-input" placeholder="0">
                        <span class="converter-unit">tons</span>
                    </div>
                    <!-- Rules of Thumb -->
                    <div class="converter-rules">
                        <h4 class="rules-title">Quick Reference:</h4>
                        <ul class="rules-list">
                            <li>1 kg ‚âà 2.2 lbs</li>
                            <li>1 ton = 1,000 kg</li>
                            <li>Mental: kg √∑ 2 + 10% ‚âà lbs</li>
                        </ul>
                    </div>
                </div>

                <!-- Distance Converter -->
                <div id="distance-converter" class="converter-section hidden">
                    <div class="converter-row">
                        <input type="number" id="dist-nm" class="converter-input" placeholder="0">
                        <span class="converter-unit">nm</span>
                    </div>
                    <div class="converter-row">
                        <input type="number" id="dist-km" class="converter-input" placeholder="0">
                        <span class="converter-unit">km</span>
                    </div>
                    <div class="converter-row">
                        <input type="number" id="dist-sm" class="converter-input" placeholder="0">
                        <span class="converter-unit">sm</span>
                    </div>
                    <!-- Rules of Thumb -->
                    <div class="converter-rules">
                        <h4 class="rules-title">Quick Reference:</h4>
                        <ul class="rules-list">
                            <li>1 nm ‚âà 1.15 sm ‚âà 1.85 km</li>
                            <li>Mental: nm * 2 ‚âà km</li>
                            <li>60 nm = 1¬∞ latitude</li>
                        </ul>
                    </div>
                </div>

                <!-- Temperature Converter -->
                <div id="temp-converter" class="converter-section hidden">
                    <div class="converter-row">
                        <input type="number" id="temp-c" class="converter-input" placeholder="0">
                        <span class="converter-unit">¬∞C</span>
                    </div>
                    <div class="converter-row">
                        <input type="number" id="temp-f" class="converter-input" placeholder="0">
                        <span class="converter-unit">¬∞F</span>
                    </div>
                    <!-- Rules of Thumb -->
                    <div class="converter-rules">
                        <h4 class="rules-title">Quick Reference:</h4>
                        <ul class="rules-list">
                            <li>Mental: C * 2 + 30 ‚âà F</li>
                            <li>0¬∞C = 32¬∞F (freezing)</li>
                            <li>15¬∞C = 59¬∞F (ISA)</li>
                            <li>-57¬∞C = -70¬∞F (typical cruise)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Wind Component Calculator -->
            <div id="wind-toolkit" class="toolkit-panel hidden">
                <h3 class="toolkit-title">Wind Component Calculator</h3>
                <div class="calc-group">
                    <label class="calc-label">Runway Heading (¬∞)</label>
                    <input type="number" id="runway-heading" class="calc-input" min="0" max="360" placeholder="270">
                </div>
                <div class="calc-group">
                    <label class="calc-label">Wind Direction (¬∞)</label>
                    <input type="number" id="wind-direction" class="calc-input" min="0" max="360" placeholder="230">
                </div>
                <div class="calc-group">
                    <label class="calc-label">Wind Speed (kt)</label>
                    <input type="number" id="wind-speed" class="calc-input" min="0" placeholder="15">
                </div>
                <button class="calc-button" onclick="calculateWind()">Calculate</button>
                <div class="calc-results">
                    <div class="result-item">
                        <span class="result-label">Headwind:</span>
                        <span id="headwind-result" class="result-value">--</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Crosswind:</span>
                        <span id="crosswind-result" class="result-value">--</span>
                    </div>
                </div>
            </div>

            <!-- Rate 1 Turn Calculator -->
            <div id="rate1-toolkit" class="toolkit-panel hidden">
                <h3 class="toolkit-title">Rate 1 Turn Calculator</h3>
                <div class="calc-group">
                    <label class="calc-label">True Airspeed (kt)</label>
                    <input type="number" id="tas-input" class="calc-input" min="0" placeholder="250">
                </div>
                <button class="calc-button" onclick="calculateRate1()">Calculate</button>
                <div class="calc-results">
                    <div class="result-item">
                        <span class="result-label">Bank Angle:</span>
                        <span id="bank-angle-result" class="result-value">--</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Turn Radius:</span>
                        <span id="turn-radius-result" class="result-value">--</span>
                    </div>
                </div>
            </div>
            <!-- ISA Deviation Calculator -->
            <div id="isa-toolkit" class="toolkit-panel hidden">
                <h3 class="toolkit-title">ISA Deviation Calculator</h3>
                <div class="calc-group">
                    <label class="calc-label">Altitude (ft)</label>
                    <input type="number" id="altitude-input" class="calc-input" min="0" max="60000" placeholder="35000">
                </div>
                <div class="calc-group">
                    <label class="calc-label">Outside Air Temperature (¬∞C)</label>
                    <input type="number" id="oat-input" class="calc-input" placeholder="-45">
                </div>
                <button class="calc-button" onclick="calculateISA()">Calculate</button>
                <div class="calc-results">
                    <div class="result-item">
                        <span class="result-label">ISA Temp:</span>
                        <span id="isa-temp-result" class="result-value">--</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">ISA Deviation:</span>
                        <span id="isa-dev-result" class="result-value">--</span>
                    </div>
                </div>
                <div class="isa-info">
                    <p class="isa-note">Standard: ISA = 15¬∞C - (Alt/1000 √ó 1.98¬∞C)</p>
                </div>
            </div>
            <!-- Density Altitude Calculator -->
            <div id="densalt-toolkit" class="toolkit-panel hidden">
                <h3 class="toolkit-title">Density Altitude Calculator</h3>
                <div class="calc-group">
                    <label class="calc-label">Field Elevation (ft)</label>
                    <input type="number" id="field-elev-input" class="calc-input" min="0" placeholder="0">
                </div>
                <div class="calc-group">
                    <label class="calc-label">Altimeter Setting</label>
                    <div class="pressure-input-group">
                        <input type="number" id="altimeter-inhg" class="calc-input" step="0.01" placeholder="29.92">
                        <span class="pressure-unit">inHg</span>
                    </div>
                    <div class="pressure-input-group">
                        <input type="number" id="altimeter-hpa" class="calc-input" step="1" placeholder="1013">
                        <span class="pressure-unit">hPa</span>
                    </div>
                </div>
                <div class="calc-group">
                    <label class="calc-label">Outside Air Temperature (¬∞C)</label>
                    <input type="number" id="dens-oat-input" class="calc-input" placeholder="15">
                </div>
                <button class="calc-button" onclick="calculateDensityAlt()">Calculate</button>
                <div class="calc-results">
                    <div class="result-item">
                        <span class="result-label">Pressure Altitude:</span>
                        <span id="pressure-alt-result" class="result-value">--</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Density Altitude:</span>
                        <span id="density-alt-result" class="result-value">--</span>
                    </div>
                </div>
                <div class="isa-info">
                    <p class="isa-note">Standard: 29.92 inHg / 1013 hPa at 15¬∞C<br>
                        Formula: DA = PA + (120 √ó (OAT - ISA_temp))</p>
                </div>
            </div>

            <!-- FDP Calculator -->
            <div id="fdp-toolkit" class="toolkit-panel hidden">
                <h3 class="toolkit-title">Flight Duty Period Calculator</h3>

                <!-- Acclimatization Status -->
                <div class="calc-group">
                    <label class="calc-label">Acclimatised Status</label>
                    <div class="fdp-toggle-group">
                        <button type="button" id="fdp-acclimatised-yes" class="fdp-toggle-btn active"
                            onclick="setAcclimatisation(true)">Yes</button>
                        <button type="button" id="fdp-acclimatised-no" class="fdp-toggle-btn"
                            onclick="setAcclimatisation(false)">No</button>
                    </div>
                </div>

                <!-- Local Start Time -->
                <div class="calc-group" id="fdp-start-time-group">
                    <label class="calc-label">Local Start Time</label>
                    <input type="time" id="fdp-start-time" class="calc-input fdp-time-input" value="06:00">
                </div>

                <!-- Rest Period (Non-Acclimatised Only) -->
                <div class="calc-group" id="fdp-rest-period-group" style="display:none;">
                    <label class="calc-label">Length of Preceding Rest</label>
                    <select id="fdp-rest-period" class="calc-input fdp-select">
                        <option value="up to 18 hours or over 30 hours">Up to 18h or over 30h</option>
                        <option value="between 18 and 30 hours">Between 18h and 30h</option>
                    </select>
                </div>

                <!-- Number of Sectors -->
                <div class="calc-group">
                    <label class="calc-label">Number of Sectors</label>
                    <input type="number" id="fdp-sectors" class="calc-input" min="1" max="10" value="1" placeholder="1">
                </div>

                <button class="calc-button" onclick="calculateFDP()">Calculate FDP</button>

                <div class="calc-results">
                    <div class="result-item fdp-result-main" id="fdp-result-container" style="display:none;">
                        <span class="result-label">Maximum FDP:</span>
                        <span id="fdp-result" class="result-value fdp-highlight">--</span>
                    </div>
                </div>

                <!-- FDP Extension Info Section -->
                <div class="calc-section-divider"></div>

                <div class="calc-section-header" onclick="toggleFDPExtension()">
                    <h3>‚è∞ FDP Extension</h3>
                    <span id="fdp-ext-toggle-icon" class="toggle-icon">‚ñ∂</span>
                </div>

                <div id="fdp-extension-section" class="fdp-ext-section" style="display:none;">
                    <!-- Rest Type Toggle -->
                    <div class="calc-group">
                        <label class="calc-label">Rest Type</label>
                        <div class="fdp-toggle-group">
                            <button type="button" id="rest-type-bunk" class="fdp-toggle-btn active"
                                onclick="setRestType('bunk')">üõèÔ∏è Bunk</button>
                            <button type="button" id="rest-type-seat" class="fdp-toggle-btn"
                                onclick="setRestType('seat')">üí∫ Seat</button>
                        </div>
                    </div>

                    <!-- Max FDP Display -->
                    <div class="fdp-ext-info-box">
                        <div class="info-row">
                            <span class="info-label">Max Permissible FDP:</span>
                            <span id="fdp-ext-max-display" class="info-value-large">18h</span>
                        </div>
                        <div class="info-note" id="fdp-ext-note">
                            Extension: 1/2 of total rest taken
                        </div>
                    </div>
                </div>

                <div class="isa-info">
                    <p class="isa-note">üìã Based on EK OMA Chapter 7<br>
                        ‚ö†Ô∏è For reference only - always consult updated official FTL documentation</p>
                </div>
            </div>

            <!-- Split Rest Calculator -->
            <div id="splitrest-toolkit" class="toolkit-panel hidden">
                <h3 class="toolkit-title">Split Rest Calculator</h3>

                <div class="calc-group">
                    <label class="calc-label">Current Time</label>
                    <input type="time" id="split-current-time" class="calc-input fdp-time-input">
                </div>

                <div class="calc-group">
                    <label class="calc-label">Arrival Time</label>
                    <input type="time" id="split-arrival-time" class="calc-input fdp-time-input">
                </div>

                <button class="calc-button" onclick="calculateSplitRest()">Calculate Rest Periods</button>

                <div class="calc-results">
                    <div class="result-item fdp-result-main" id="split-total-container" style="display:none;">
                        <span class="result-label">Total Rest Available:</span>
                        <span id="split-total-result" class="result-value fdp-highlight">--</span>
                    </div>

                    <div class="result-item" id="split-buffer-container" style="display:none;">
                        <span class="result-label">After 1hr Buffer:</span>
                        <span id="split-buffer-result" class="result-value">--</span>
                    </div>
                </div>

                <div class="calc-section-divider"></div>

                <div class="calc-results">
                    <div class="result-item" id="split-equal-container" style="display:none;">
                        <span class="result-label">Equal Split (50/50):</span>
                        <span id="split-equal-result" class="result-value">--</span>
                    </div>

                    <div class="fdp-ext-info-box" id="split-unequal-container" style="display:none;">
                        <div class="info-row">
                            <span class="info-label">First Rest (2/3):</span>
                            <span id="split-first-result" class="info-value-large">--</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Second Rest (1/3):</span>
                            <span id="split-second-result" class="info-value-large">--</span>
                        </div>
                    </div>
                </div>

                <div class="isa-info">
                    <p class="isa-note">üìã Formula: (Total - 1hr) √∑ 2<br>
                        üí° Unequal split gives more rest to the pilot flying first leg</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>

</html>